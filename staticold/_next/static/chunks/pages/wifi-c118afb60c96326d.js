(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[281],{1295:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/wifi",function(){return t(1745)}])},9452:function(n,e,t){"use strict";var r=t(5893),i=t(2962),c=t(9008),a=t(1163),o=t(5125);e.Z=function(n){var e=(0,a.useRouter)();return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(c.default,{children:[(0,r.jsx)("meta",{charSet:"UTF-8"},"charset"),(0,r.jsx)("meta",{name:"viewport",content:"width=device-width,initial-scale=1"},"viewport"),(0,r.jsx)("link",{rel:"apple-touch-icon",href:"".concat(e.basePath,"/apple-touch-icon.png")},"apple"),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"32x32",href:"".concat(e.basePath,"/favicon-32x32.png")},"icon32"),(0,r.jsx)("link",{rel:"icon",type:"image/png",sizes:"16x16",href:"".concat(e.basePath,"/favicon-16x16.png")},"icon16"),(0,r.jsx)("link",{rel:"icon",href:"".concat(e.basePath,"/favicon.ico")},"favicon")]}),(0,r.jsx)(i.PB,{title:n.title,description:n.description,canonical:n.canonical,openGraph:{title:n.title,description:n.description,url:n.canonical,locale:o.Z.locale,site_name:o.Z.site_name}})]})}},5542:function(n,e,t){"use strict";t.d(e,{Z:function(){return l}});var r=t(5893),i=t(386);function c(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function a(){var n=c([""]);return a=function(){return n},n}function o(){var n=c([""]);return o=function(){return n},n}var u=i.Z.div(a()),s=i.Z.div(o()),l=function(n){return(0,r.jsxs)(u,{className:"h-[320px] w-[480px] border-solid border-2 border-black p-2",children:[n.meta,(0,r.jsx)("div",{className:"w-full relative",children:(0,r.jsx)(s,{children:n.children})})]})}},8851:function(n,e,t){"use strict";t.d(e,{Od:function(){return h},I_:function(){return v},wl:function(){return x},Sj:function(){return w},Cz:function(){return m}});var r=t(4051),i=t.n(r),c=t(5125);var a=function(n,e,t){return new Promise((function(r,i){return n().then(r).catch((function(c){return t>0?(o=e,new Promise((function(n){return setTimeout(n,o)}))).then(a.bind(null,n,e,t-1)).then(r).catch((function(n){var e,t,r="Operation failed";e=n,(null!=(t=Error)&&"undefined"!==typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t)&&(r=n.message),i(r)})):i(c);var o}))}))},o=t(2435);function u(n,e,t,r,i,c,a){try{var o=n[c](a),u=o.value}catch(s){return void t(s)}o.done?e(u):Promise.resolve(u).then(r,i)}function s(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var c=n.apply(e,t);function a(n){u(c,r,i,a,o,"next",n)}function o(n){u(c,r,i,a,o,"throw",n)}a(void 0)}))}}function l(n,e){return null!=e&&"undefined"!==typeof Symbol&&e[Symbol.hasInstance]?e[Symbol.hasInstance](n):n instanceof e}var f=function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return a(s(i().mark((function t(){var r,c;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,o.Z)("PyCall ".concat(n));case 3:return t.next=5,window.pywebview.api[n](e);case 5:return r=t.sent,t.abrupt("return",r);case 9:throw t.prev=9,t.t0=t.catch(0),c="PyCall ".concat(n," failed: ").concat(t.t0),l(t.t0,Error)&&(c=t.t0.message),new Error(c);case 14:case"end":return t.stop()}}),t,null,[[0,9]])}))),!1===(null===e||void 0===e?void 0:e.retry)?1:c.Z.RETRY_DELAY,c.Z.MAX_RETRIES).then(function(){var n=s(i().mark((function n(e){var t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,t=JSON.parse(e),n.next=4,(0,o.Z)("PyCall returned object ".concat(t.message));case 4:return n.abrupt("return",t.message);case 7:return n.prev=7,n.t0=n.catch(0),n.next=11,(0,o.Z)("PyCall returned ".concat(e));case 11:return n.abrupt("return",e);case 12:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()).catch(function(){var e=s(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw r="PyCall ".concat(n," failed: ").concat(t),l(t,Error)&&(r=t.message),new Error(r);case 3:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}())};function d(n,e,t,r,i,c,a){try{var o=n[c](a),u=o.value}catch(s){return void t(s)}o.done?e(u):Promise.resolve(u).then(r,i)}function p(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var c=n.apply(e,t);function a(n){d(c,r,i,a,o,"next",n)}function o(n){d(c,r,i,a,o,"throw",n)}a(void 0)}))}}var h=function(){return f("getHardwareId").catch((function(){return""}))},v=function(){return f("getIpAddress").catch((function(){return""}))},x=function(){var n=p(i().mark((function n(){var e,t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f("getWifiInfo").catch((function(){return{ssid:"",quality:0}}));case 2:return e=n.sent,t=Math.round(Number.parseInt(e.quality,10)/70*100),n.abrupt("return",{ssid:e.ssid,quality:t});case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),w=function(){var n=p(i().mark((function n(){var e,t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f("getWifiNetworks").catch((function(){return""}));case 2:return e=n.sent,t=e.split("ESSID:").map((function(n){return n.trim().replace(/^"|"$/g,"")})).filter((function(n,e,t){return t.indexOf(n)===e})).filter((function(n){return n})),n.abrupt("return",t);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),m=function(){var n=p(i().mark((function n(e,t){var r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,f("setWifiNetwork",{ssid:e,password:t}).catch((function(){return[]}));case 2:return r=n.sent,n.abrupt("return",r);case 4:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},2435:function(n,e,t){"use strict";var r=t(4051),i=t.n(r);function c(n,e,t,r,i,c,a){try{var o=n[c](a),u=o.value}catch(s){return void t(s)}o.done?e(u):Promise.resolve(u).then(r,i)}var a=function(){var n,e=(n=i().mark((function n(e){var t,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log(e),n.prev=1,n.next=5,null===(t=window.pywebview)||void 0===t||null===(r=t.api)||void 0===r?void 0:r.log(e);case 5:return n.abrupt("return",!0);case 8:return n.prev=8,n.t0=n.catch(1),console.error("Logging error ".concat(n.t0)),n.abrupt("return",!1);case 12:case"end":return n.stop()}}),n,null,[[1,8]])})),function(){var e=this,t=arguments;return new Promise((function(r,i){var a=n.apply(e,t);function o(n){c(a,r,i,o,u,"next",n)}function u(n){c(a,r,i,o,u,"throw",n)}o(void 0)}))});return function(n){return e.apply(this,arguments)}}();e.Z=a},1745:function(n,e,t){"use strict";t.r(e);var r=t(4051),i=t.n(r),c=t(5893),a=t(7294),o=t(2456),u=t(2186),s=t(5697),l=t(745),f=t(452),d=t(6319),p=t(9162),h=t(3569),v=t(9251),x=t(3321),w=t(1409),m=t(1664),j=t(9452),y=t(5542),b=t(8851),g=t(5125);function Z(n,e,t,r,i,c,a){try{var o=n[c](a),u=o.value}catch(s){return void t(s)}o.done?e(u):Promise.resolve(u).then(r,i)}function P(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var c=n.apply(e,t);function a(n){Z(c,r,i,a,o,"next",n)}function o(n){Z(c,r,i,a,o,"throw",n)}a(void 0)}))}}function k(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}e.default=function(){var n=(0,a.useRef)(null),e=(0,a.useState)({}),t=e[0],r=e[1],Z=(0,a.useState)(-1),S=Z[0],E=Z[1],C=(0,a.useState)([]),I=C[0],_=C[1],O=(0,a.useState)(""),N=O[0],R=O[1],T=(0,a.useState)(!0),F=T[0],W=T[1],z=(0,a.useState)(!0),q=z[0],A=z[1],D=(0,a.useState)(!1),M=D[0],Y=D[1],X=function(){var n=P(i().mark((function n(){var e;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,(0,b.wl)();case 2:e=n.sent,r(e);case 4:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),H=function(){var e=P(i().mark((function e(){var t,r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.next=4,(0,b.Sj)();case 4:r=e.sent,_(r),null===(t=n.current)||void 0===t||t.focus(),A(!1),X();case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var n=P(i().mark((function n(){var e,t;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(Y(!0),!(e=I[S])){n.next=7;break}return n.next=5,(0,b.Cz)(e,N);case 5:t=n.sent,console.log(t);case 7:Y(!1);case 8:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return(0,a.useEffect)((function(){H()}),[]),(0,c.jsx)(y.Z,{meta:(0,c.jsx)(j.Z,{title:"Wifi | ".concat(g.Z.title,": ").concat(g.Z.tagline),description:g.Z.description}),children:(0,c.jsxs)("div",{className:"block text-center ",children:[(0,c.jsx)("h4",{className:"my-0",onClick:X,children:"Wifi Setup"}),!t&&(0,c.jsx)("p",{children:"Getting WiFi information..."})||(null===t||void 0===t?void 0:t.ssid)?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{children:"You are already connected to the internet."}),(0,c.jsxs)("p",{children:["Current network: ",t.ssid," quality: ",t.quality]})]}):(0,c.jsx)("p",{children:"Enter your WiFi name (SSID) and password to connect to your network."}),(0,c.jsxs)(p.ZP,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:2,children:[(0,c.jsx)(p.ZP,{item:!0,xs:9,children:(0,c.jsx)(w.Z,{children:I&&(0,c.jsx)(h.Z,{ref:n,disablePortal:!0,disabled:q||M,options:I,sx:{width:"100%"},renderInput:function(n){return(0,c.jsx)(v.Z,function(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{},r=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(t).filter((function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})))),r.forEach((function(e){k(n,e,t[e])}))}return n}({},n,{label:"Network"}))},onChange:function(n){E(n.target.value)}})})}),(0,c.jsx)(p.ZP,{item:!0,xs:3,children:(0,c.jsx)(w.Z,{children:(0,c.jsx)(d.Z,{loading:q,loadingPosition:"start",sx:{width:"100%"},startIcon:(0,c.jsx)(o.Z,{}),onClick:H,variant:"outlined",children:"Refresh"})})}),(0,c.jsx)(p.ZP,{item:!0,xs:9,children:(0,c.jsx)(w.Z,{children:(0,c.jsx)(v.Z,{label:"Password",variant:"outlined",value:N,sx:{width:"100%"},type:F?"password":"text",onChange:function(n){var e;R(null===n||void 0===n||null===(e=n.target)||void 0===e?void 0:e.value)}})})}),(0,c.jsx)(p.ZP,{item:!0,xs:3,children:(0,c.jsx)(w.Z,{children:(0,c.jsx)(x.Z,{disabled:q||M,variant:"outlined",sx:{width:"100%"},startIcon:F?(0,c.jsx)(u.Z,{}):(0,c.jsx)(s.Z,{}),onClick:function(){return W(!F)},children:F?"Show":"Hide"})})}),(0,c.jsx)(p.ZP,{item:!0,xs:6,children:(0,c.jsx)(w.Z,{children:(0,c.jsx)(d.Z,{loading:q||M,loadingPosition:"end",sx:{width:"100%"},endIcon:(0,c.jsx)(l.Z,{}),variant:"contained",onClick:L,children:"Connect"})})}),(0,c.jsx)(p.ZP,{item:!0,xs:6,children:(0,c.jsx)(w.Z,{children:(0,c.jsx)(m.default,{href:"/wifi",passHref:!0,children:(0,c.jsx)(x.Z,{disabled:!t.ssid,sx:{width:"100%"},endIcon:(0,c.jsx)(f.Z,{}),variant:"contained",children:"Continue"})})})})]})]})})}},5125:function(n,e){"use strict";var t={totalImages:5,site_name:"iot-cloud",email:"me@lacymorrow.com",title:"SmartCloud",tagline:"Firmware for iot scheduler",description:"Firmware for iot scheduler",locale:"en",errorMessage:"",MAX_RETRIES:10,RETRY_DELAY:500};t.errorMessage='There was an error, please email <a href="mailto:'.concat(t.email,'">').concat(t.email,"</a>"),e.Z=t}},function(n){n.O(0,[411,415,512,774,888,179],(function(){return e=1295,n(n.s=e);var e}));var e=n.O();_N_E=e}]);